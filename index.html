<html><head><title>E1M1</title>
<script src="https://cdn.rawgit.com/mrdoob/three.js/r74/build/three.min.js"></script>
//<script src="https://cdn.rawgit.com/Ooblik/AltspaceVR-Native-Components-JS/master/js/JSNativeComponents.js"></script>
<script src="https://cdn.rawgit.com/norybiak/UltimateLoader/master/dist/UltimateLoader.min.js"></script>
<script src="dist/altspace.min.js"></script>
<script src="dist/JSNativeComponents.js"></script>

</head><body><script>

var scene = new THREE.Scene();
var renderer = altspace.getThreeJSRenderer();

UltimateLoader.load("https://rawgit.com/evil-doer/evil-doer.github.io/master/models/e1m1.obj", function(object){

var collider = new NativeComponent('n-mesh-collider', {type: "environment", convex: false}, object);

	object.scale.set(0.8, 1, 0.8);
	object.traverse(function(child){
	  child.userData.altspace = {collider:{enabled: false}};
	});
	object.name = "e1m1";

	scene.add(object);
});

UltimateLoader.load("https://rawgit.com/evil-doer/evil-doer.github.io/master/models/ramps.obj", function(object){

	var collider = new NativeComponent('n-mesh-collider', {type: "environment", convex: false}, object.children[0]);

	object.scale.set(0.8, 1, 0.8);
	object.traverse(function(child){
	  child.userData.altspace = {collider:{enabled: false}};
	});
	object.children[0].material.opacity = 0;
	object.children[0].material.transparent = true;
	object.name = "ramps";
	scene.add(object);
});

UltimateLoader.load("https://rawgit.com/evil-doer/evil-doer.github.io/master/models/door1.obj", function(object){

var collider = new NativeComponent('n-mesh-collider', {type: "environment", convex: false}, object);

	object.scale.set(0.8, 1, 0.8);
    object.addEventListener('cursorup', function () {
        Door1()
    });
	object.name = "door1";
	scene.add(object);
});

function Door1(){
	var door1 = scene.getObjectByName( "door1" );
	door1.position.y += 0.1;
	requestAnimationFrame(Door1);
	if(door1.position.y == 1.8)return;
};

function animate(){
	requestAnimationFrame(animate);
	renderer.render(scene);
};

animate();

</script></body></html>
